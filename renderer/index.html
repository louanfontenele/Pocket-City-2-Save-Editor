<!-- renderer/index.html -->
<!DOCTYPE html>
<html lang="en" data-theme="auto">
  <head>
    <meta charset="utf-8" />
    <title>Pocket City 2 — Save Editor (alpha)</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="./styles.css" />
  </head>
  <body>
    <header class="appbar">
      <div class="brand">
        <svg class="ico"><use href="#i-city"></use></svg>
        <span>Pocket City 2 — Save Editor (alpha)</span>
      </div>
      <nav class="nav">
        <button id="btnHome" class="navbtn active">Saves</button>
        <button id="btnGlobals" class="navbtn">Survival Global</button>
        <button id="btnBackups" class="navbtn">Backups</button>
        <button id="btnRescan" class="navbtn">Rescan</button>
        <button id="btnChooseDir" class="navbtn">Browse…</button>
        <button id="btnTheme" class="navbtn" title="Toggle theme">
          <svg class="ico"><use href="#i-theme"></use></svg>
        </button>
      </nav>
    </header>

    <!-- Root list (only root maps) -->
    <main id="pageHome" class="page visible">
      <div class="toolbar">
        <input id="searchHome" type="search" placeholder="Search by name…" />
        <div class="filters">
          <label
            ><input type="radio" name="tagHome" value="all" checked />All</label
          >
          <label
            ><input type="radio" name="tagHome" value="manual" />Manual</label
          >
          <label><input type="radio" name="tagHome" value="auto" />Auto</label>
          <label
            ><input type="radio" name="tagHome" value="unknown" />Unknown</label
          >
        </div>
        <div class="spacer"></div>
        <button id="btnMaxAll" class="navbtn">Set Max (All)</button>
        <button id="btnResetAll" class="navbtn">Reset Day (All)</button>
        <button id="btnSetDay100All" class="navbtn">Set Day 100 (All)</button>
        <button id="btnEnableSandboxAll" class="navbtn">
          Enable Sandbox (All)
        </button>
        <button id="btnDisableSandboxAll" class="navbtn">
          Disable Sandbox (All)
        </button>
      </div>
      <section id="groups" class="cardgrid"></section>
    </main>

    <!-- Survival Global Settings (only editable fields; preserved fields are hidden) -->
    <main id="pageGlobals" class="page">
      <div class="mapHeader">
        <h2>Survival Global Settings</h2>
        <div class="spacer"></div>
        <button id="btnGlobalsReload" class="navbtn">Reload</button>
      </div>

      <section class="card">
        <div class="title">Editable fields</div>
        <form id="globalsForm" class="grid2">
          <!-- Best day -->
          <label
            >Best Day (Easy)<input
              type="number"
              min="0"
              max="100"
              name="bestDayReachedEasy"
          /></label>
          <label
            >Best Day (Hard)<input
              type="number"
              min="0"
              max="100"
              name="bestDayReachedHard"
          /></label>
          <label
            >Best Day (Expert)<input
              type="number"
              min="0"
              max="100"
              name="bestDayReachedExpert"
          /></label>

          <!-- Stars -->
          <label
            >Stars (Easy)<input
              type="number"
              min="0"
              max="5"
              name="highestStarsReachedEasy"
          /></label>
          <label
            >Stars (Hard)<input
              type="number"
              min="0"
              max="5"
              name="highestStarsReachedHard"
          /></label>
          <label
            >Stars (Expert)<input
              type="number"
              min="0"
              max="5"
              name="highestStarsReachedExpert"
          /></label>

          <!-- Population -->
          <label
            >Highest Population (Easy)<input
              type="number"
              min="0"
              max="999999999"
              name="highestPopulationReachedEasy"
          /></label>
          <label
            >Highest Population (Hard)<input
              type="number"
              min="0"
              max="999999999"
              name="highestPopulationReachedHard"
          /></label>
          <label
            >Highest Population (Expert)<input
              type="number"
              min="0"
              max="999999999"
              name="highestPopulationReachedExpert"
          /></label>

          <!-- Total points -->
          <label style="grid-column: 1/-1"
            >Total Upgrade Points
            <input
              type="number"
              min="0"
              max="999999"
              name="totalUpgradePoints" />
          </label>

          <!-- Upgrades -->
          <div style="grid-column: 1/-1">
            <label>Upgrades Spent</label>
            <div id="upgradesGrid" class="resgrid"></div>
            <p class="hint">
              Levels are capped per upgrade (Lifelines max 2; others max 3).
            </p>
          </div>

          <div style="grid-column: 1/-1" class="actions">
            <button type="submit" class="primary">Save Global Settings</button>
            <button id="btnGlobalsApplyDefaults" type="button">
              Apply Max Defaults + Save
            </button>
            <button id="btnGlobalsDelete" type="button" class="danger">
              Delete File
            </button>
          </div>
        </form>
      </section>
    </main>

    <!-- Map details -->
    <main id="pageMap" class="page">
      <div class="mapHeader">
        <button id="btnBackToHome" class="navbtn small">← Back</button>
        <h2 id="mapTitle"></h2>
        <div class="spacer"></div>
        <button id="btnMaxThis" class="navbtn">Set Max (This map)</button>
        <button id="btnResetThis" class="navbtn">Reset Day (This map)</button>
        <button id="btnSetDay100This" class="navbtn">Set Day 100 (This)</button>
        <button id="btnEnableSandboxThis" class="navbtn">Enable Sandbox</button>
        <button id="btnDisableSandboxThis" class="navbtn">
          Disable Sandbox
        </button>
      </div>

      <div class="toolbar">
        <input id="searchMap" type="search" placeholder="Search saves…" />
        <div class="filters">
          <label
            ><input type="radio" name="tagMap" value="all" checked />All</label
          >
          <label
            ><input type="radio" name="tagMap" value="manual" />Manual</label
          >
          <label><input type="radio" name="tagMap" value="auto" />Auto</label>
          <label
            ><input type="radio" name="tagMap" value="unknown" />Unknown</label
          >
        </div>
      </div>

      <section>
        <h3 class="sectionTitle">Saves for this map</h3>
        <div id="mapSaves" class="cardgrid"></div>
      </section>
      <section>
        <h3 class="sectionTitle">Child maps</h3>
        <div id="childMaps" class="cardgrid"></div>
      </section>
    </main>

    <!-- Backups -->
    <main id="pageBackups" class="page">
      <div class="backupsHeader">
        <select id="backupTarget"></select>
        <button id="btnOpenBackupFolder" class="navbtn small">
          Reveal in Explorer/Finder
        </button>
      </div>
      <section id="backupsList" class="cardgrid"></section>
    </main>

    <!-- Edit drawer -->
    <aside id="drawer" class="drawer">
      <div class="drawerHead">
        <div class="title">
          <svg class="ico"><use href="#i-edit"></use></svg>
          <span id="drawerTitle">Edit Save</span>
        </div>
        <button id="drawerClose" class="iconbtn">✕</button>
      </div>
      <div class="drawerBody">
        <form id="editForm">
          <div class="grid2">
            <label>Name<input name="name" type="text" /></label>
            <label>Money<input name="money" type="number" /></label>
            <label
              >Research Points<input name="researchPoints" type="number"
            /></label>
            <label>Day<input name="day" type="number" min="1" /></label>
            <label>Level<input name="level" type="number" min="0" /></label>
            <label>
              Map Size
              <select name="mapSize">
                <option value="40">40×40</option>
                <option value="64">64×64</option>
                <option value="72">72×72</option>
                <option value="88">88×88</option>
              </select>
            </label>
            <label>
              Difficulty
              <select name="difficulty">
                <option value="1">Easy</option>
                <option value="2">Hard</option>
                <option value="3">Expert</option>
              </select>
            </label>
          </div>

          <fieldset class="switches">
            <legend>Sandbox</legend>
            <label class="switch">
              <input name="sandbox" type="checkbox" />
              <span>Sandbox Mode (unlockAll, infiniteMoney, maxLevel)</span>
            </label>
          </fieldset>

          <h3>Resources</h3>
          <div id="resList" class="resgrid"></div>

          <div class="actions">
            <button type="submit" class="primary">
              Save Changes (instant)
            </button>
            <button id="btnDeleteSave" type="button" class="danger">
              Delete Save
            </button>
          </div>
        </form>
        <p class="hint">
          Every edit creates a backup automatically (keeps last 20 per save).
        </p>
      </div>
    </aside>

    <svg class="hide" aria-hidden="true">
      <symbol id="i-city" viewBox="0 0 24 24">
        <path
          d="M3 21h18v-2H3v2zm2-3h3V4H5v14zm5 0h3V8h-3v10zm5 0h3V2h-3v16z" />
      </symbol>
      <symbol id="i-theme" viewBox="0 0 24 24">
        <path d="M12 3a9 9 0 1 0 9 9 7 7 0 0 1-9-9z" />
      </symbol>
      <symbol id="i-edit" viewBox="0 0 24 24">
        <path
          d="M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04a1.003 1.003 0 0 0 0-1.42l-2.34-2.34a1.003 1.003 0 0 0-1.42 0l-1.83 1.83 3.75 3.75 1.84-1.82z" />
      </symbol>
    </svg>

    <script src="./renderer.js"></script>
  </body>
</html>
